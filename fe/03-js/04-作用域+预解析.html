<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <script>
        /* 
            作用域（es6之前）
            1. 全局作用域：作用于所有代码执行的环境（整个script标签内部）或者一个独立的js文件
            2. 局部作用域（函数作用域）：作用与函数内的代码环境
            ps: 在es6之前，js中是没有块级作用域的

            全局变量和局部变量的区别
            1. 全局变量：在任何一个地方都可以使用，只有在浏览器关闭时才会被销毁，因此比较占内存
            2. 局部变量：只在函数内部使用，当其所在的代码块被执行时，会被初始化；当代码块运行结束后，就会被销毁，因此更节省内存空间


            作用域链
            如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域
            根据在内部函数可以访问外部函数变量的这种机制，用链式查找决定哪些数据能被内部函数访问，就称作作用域链
        */

        // 采取就近原则的方式来查找变量最终值
        function f1() {
            var num = 123;
            function f2() {
                console.log( num );
            }
            f2();
        }
        var num = 456;
        f1();

        /* 
            预解析
            JavaScript 代码是由浏览器中的 JavaScript 解析器来执行的。JavaScript 解析器在运行 JavaScript 代码的时候分为两步：预解析和代码执行。
            （1）预解析：在当前作用域下, JS 代码执行之前，浏览器会默认把带有 var 和 function 声明的变量在内存中进行提前声明或者定义。
            （2）代码执行： 从上到下执行JS语句。
            
            预解析只会发生在通过 var 定义的变量和 function 上。学习预解析能够让我们知道为什么在变量声明之前访问变量的值是 undefined，为什么在函数声明之前就可以调用函数。

            预解析分为 变量预解析（变量提升） 和 函数预解析（函数提升）
            （1）变量提升：就是把所有的变量声明提升到当前的作用域最前面，不提升赋值操作
            （2）函数提升：把所有的函数声明提升到当前作用域的最前面
        */

        // eg1
        console.log(num1);  // 结果是undefined
        var num1 = 10;
        /* eg1的实际执行
            var num1;
            console.log(num1); 
            num1 = 10
        */


        // eg2
        fn();       // 结果是 11
        function fn() {
            console.log(11);
        }
        /*
            function fn() {
                console.log(11);
            }
            fn();  
        */

        // eg3
        fun();      // 结果是 报错
        var fun = function fn() {
            console.log(11);
        }
        /* eg3实际执行
            var fun;
            fun();    
            var fun = function fn() {
                console.log(11);
            }
        */
        

    </script>
</head>
<body>
    
</body>
</html>